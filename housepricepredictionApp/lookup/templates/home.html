{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>Apartment4u</title>
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"> -->
	<link rel="stylesheet" href="{% static 'css/home.css' %}">	
</head>

<body>
   
	<!-- nav bar  -->
	<div id="navbar">
		<a href="{% url 'home' %}" class="active" onclick="highlightNav(this)">File Upload<div class="hori-selector"></div></a>
		<a href="{% url 'train' %}" onclick="highlightNav(this)">Training<div class="hori-selector"></div></a>
		<a href="#" onclick="highlightNav(this)">Predict<div class="hori-selector"></div></a>
		<div class="company-name">Apartment 4 U</div>
	  </div>

   <div class="intro">
    <p>
    House Price Prediction web application utilizes a  Linear Regression  model to accurately predict the price of a house.
    <br> You can get started by uploading a CSV file below!
    </p>
  </div>
  
	
<div class="frame">
    <div class="center">
        <div class="title">
        <p>Upload your file</p>
	    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        <label for="file-upload">Select CSV file</label>
        <input type="file" id="file-upload" name="csv_file" accept=".csv">
        <input type="submit" value="Submit" class="hidden">

        </form>
        </div>
    </div>
</div>



<<<<<<< HEAD
<script src="{% static 'js/home.js' %}"></script>
=======

	<script>
		document.getElementById("file-upload").addEventListener("change", function() {
			// Code to execute when a file is selected
			// For this case , will hide the button:
			const selectFileButton = document.querySelector("label[for='file-upload']");
    selectFileButton.classList.add("hidden");
	  // Change the "Upload your file" text to "Submit your file" when a file is selected
	  const uploadText = document.querySelector(".title p");
            uploadText.textContent = "Submit your file !";

	// Change the submit button's background color and size when a file is selected
		 const submitButton = document.querySelector("input[type='submit']");
		 submitButton.classList.remove("hidden");
    submitButton.style.backgroundColor = "#0d8907";
    submitButton.style.fontSize = "1.2em";
	submitButton.style.padding = "12px 24px";
submitButton.style.borderRadius = "5px";
// Change the submit button's hover background color
submitButton.style.transition = "background-color 0.5s ease-in-out";
    submitButton.addEventListener("mouseover", function() {
        submitButton.style.backgroundColor = "#1cd312";
    });
    submitButton.addEventListener("mouseout", function() {
        submitButton.style.backgroundColor = "#0d8907";
    });


            
		});
        document.querySelector('form').addEventListener('submit', function(e) {
		e.preventDefault(); // prevent the form from submitting normally

		const fileInput = document.querySelector('#file-upload');
    	const file = fileInput.files[0];
    	const allowedExtensions = /(\.csv)$/i; // regular expression to match CSV files
    	if (!allowedExtensions.exec(file.name)) {
        alert('Please select a CSV file.');
        fileInput.value = '';
        return false;
    }
		
		// create a FormData object to send the file with the form data
		const formData = new FormData();
		formData.append('csv_file', document.querySelector('#file-upload').files[0]);
		
		// send the form data to the server using an AJAX request
fetch('/upload_csv/', {
    method: 'POST',
    body: formData,
    headers: {
        'X-CSRFToken': document.querySelector('input[name="csrfmiddlewaretoken"]').value
    }
}).then(response => {
    if (response.ok) {
        // check if the CSV file is valid
        response.json().then(data => {
            if (data.is_valid) {
                // redirect to the train.html page if the upload was successful and the CSV file is valid
                window.location.href = "train.html";
            } else {
                // show the error message if the CSV file is invalid
                alert(data.error_message);
            }
        });
    } else {
        alert('Upload failed.');
    }
});

    });
	function highlightNav(element) {
        var navLinks = document.querySelectorAll("#navbar a");
        navLinks.forEach(function(link) {
            link.classList.remove("active");
        });
        element.classList.add("active");
    }
	
	
	





        
	</script>
>>>>>>> f96ed397f6353ca5c301e3280fc58efbdb82af75
</body>
</html>
